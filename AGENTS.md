# Project Agents.md Guide for AI Agents

This Agents.md file provides comprehensive guidance for AI agents working with this codebase.

## Project Structure for AI Agents Navigation

- `/aead`: AEAD implementations, including algorithms like ASCON-128a, Xoodyak, ChaCha20-Poly1305, AES-GCM, etc.
- `/hash`: Hashing functions and interfaces, supporting SHA3, BLAKE2, Xoodyak, and SP 800-185 constructions.
- `/xof`: Extendable-Output Functions (XOF) like SHAKE, BLAKE2 XOF, and Xoodyak XOF.
- `/kdf`: Key Derivation Functions including HKDF, PBKDF2, Argon2id, and scrypt.
- `/mac`: Message Authentication Codes such as HMAC-SHA256 and Poly1305.
- `/stream`: Stream ciphers like ChaCha20 and XChaCha20.
- `/block`: Block ciphers, primarily AES-128 and AES-256 wrappers.
- `/sig`: Signature algorithms including Ed25519 and ECDSA P-256.
- `/ecdh`: Elliptic Curve Diffie-Hellman for X25519, P-256, and P-384.
- `/hpke`: Hybrid Public Key Encryption implementations.
- `/secret`: Helpers for secret material management, including symmetric keys, nonces, and counters.
- `/internal`: Internal implementations and primitives shared across packages (e.g., BLAKE2b, ChaCha20, Keccak).
- `/test`: Test suites with known-answer tests, Wycheproof vectors, and fuzzing harnesses. Each package has its own tests with /testdata test vectors.
- `/`: Root files include `go.mod` (specifies Go 1.22+ and module path), `README.md` (documentation and examples), `LICENSE`, and `.gitignore`.

## Coding Conventions for AI Agents

### General Conventions for Agents.md Implementation

- Use Go 1.22+ as specified in `go.mod`; ensure compatibility with standard library only (no external dependencies).
- Follow Go naming conventions: exported identifiers start with capital letters, use camelCase for unexported.
- Handle errors explicitly; return errors from functions rather than panicking in library code.
- Use interfaces consistently (e.g., `aead.Aead`, `hash.Hasher`, `xof.XOF`) for polymorphism and testability.
- Implement constant-time operations where security requires (e.g., in MAC verification, ECDH).
- Zeroize sensitive buffers after use (e.g., keys, nonces) using `secret` package helpers.
- Write readable, auditable code with comments for complex logic; avoid obfuscation.

### Package-Specific Guidelines for AI Agents

- **AEAD**: Implement `aead.Aead` interface; encrypt returns `ciphertext || tag`; decrypt verifies tag in constant-time.
- **Hashing**: Use `hash.Hasher` interface; support both streaming and single-shot modes.
- **XOF**: Return `xof.XOF` interface for arbitrary-length output.
- **KDF**: Use `kdf.Deriver` interface; validate parameters (e.g., via `kdf.CheckParams` for PBKDF2).
- **MAC**: Provide single-shot `Sum` and `Verify` functions; ensure one-time keys for Poly1305.
- **Stream/Block**: Implement shared interfaces (`stream.Stream`, `block.Cipher`) for interchangeability.
- **Signatures/ECDH**: Use standard formats (e.g., Ed25519 64B signatures, uncompressed EC points).
- **HPKE**: Follow RFC 9180 base mode; use predefined suites like `hpke.SuiteX25519ChaCha20`.
- **Secret**: Use `secret` package for secure key/nonce management; defer `Destroy()` calls.

## Testing Requirements for AI Agents

AI agents should run tests with the following commands:

```bash
# Run all tests
go test ./...

# Run tests in the test directory
go test ./test/...

# Run tests with race detector
go test -race ./...

# Run specific package tests
go test ./aead

# Run with coverage
go test -cover ./...
```

Tests include known-answer tests (KAT), Wycheproof vectors, fuzzing, and tamper checks.
AI agents must ensure new code (and old code) passes all tests and adds appropriate test coverage.
Any Algorithm added or update must be validated by RFCs or standards (e.g., NIST, IETF).

## Pull Request Guidelines for AI Agents

When AI agents help create a PR, please ensure it:

1. Includes a clear description of changes, referencing algorithms or interfaces affected.
2. Links to relevant RFCs, standards (e.g., NIST, IETF), or issues.
3. Ensures all tests pass, including race detection and coverage.
4. Includes examples or updates to `README.md` for new features.
5. Keeps PRs focused on a single algorithm or interface change.
6. Validates interoperability with existing implementations.

## Programmatic Checks for AI Agents

Before submitting changes generated by AI agents, run:

```bash
# Lint and vet checks
go vet ./...

# Build check
go build ./...

# Format check
gofmt -d .

# Test check
go test ./...
```

All checks must pass before AI agent-generated code can be merged. Agents.md helps ensure AI agents follow these requirements for security and correctness.